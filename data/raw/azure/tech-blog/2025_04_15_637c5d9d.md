# Announcing the general availability of Route-Maps for Azure virtual WAN.

**原始链接:** [https://techcommunity.microsoft.com/blog/azurenetworkingblog/announcing-the-general-availability-of-route-maps-for-azure-virtual-wan-/4402492](https://techcommunity.microsoft.com/blog/azurenetworkingblog/announcing-the-general-availability-of-route-maps-for-azure-virtual-wan-/4402492)

**发布时间:** 2025-04-15

**厂商:** AZURE

**类型:** TECH-BLOG

---
![](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/bS00NDAyNDkyLWlIVENxYw?revision=12&image-dimensions=2000x2000&constrain-image=true)

Azure Networking Blog 

# Announcing the general availability of Route-Maps for Azure virtual WAN.

Apr 15, 2025

## We are excited to announce the general availability of Route-Maps for Azure virtual WAN. 

Route-maps is a feature that gives you the ability to control route advertisements and routing for Virtual WAN virtual hubs. Route-maps lets you have more control of the routing that enters and leaves Azure Virtual WAN site-to-site (S2S) VPN connections, User VPN point-to-site (P2S) connections, ExpressRoute connections, and virtual network (VNet) connections.

## Why use Route-maps?

  * Route-maps can be used to summarize routes when you have on-premises networks connected to Virtual WAN via ExpressRoute or VPN and are limited by the number of routes that can be advertised from/to virtual hub.
  * You can use Route-maps to control routes entering and leaving your Virtual WAN deployment among on-premises and virtual-networks.
  * You can control routing decisions in your Virtual WAN deployment by modifying a BGP attribute such as  _AS-PATH_ to make a route more, or less preferable. This is helpful when there are destination prefixes reachable via multiple paths and customers want to use AS-PATH to control best path selection.
  * You can easily tag routes using the BGP community attribute in order to manage routes.

## What is a Route-map?

A Route-map is an ordered sequence of one or more rules that are applied to routes received or sent by the virtual hub. Each Route-map rule comprises of 3 sections: 

#### **1\. Match conditions**

![](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/bS00NDAyNDkyLVVCWjRtYg?image-dimensions=750x750&revision=12)

Route-maps allows you to match routes using Route-prefix, BGP community and AS-Path. These are the set of conditions that a processed route must meet in order to be considered as a match for the rule. Below are the supported match conditions. 

Property| Criterion| Value (example)| Interpretation  
---|---|---|---  
Route-prefix| equals| 10.1.0.0/16,10.2.0.0/16,10.3.0.0/16,10.4.0.0/16| Matches these 4 routes only. Specific prefixes under these routes won't be matched.  
Route-prefix| contains| 10.1.0.0/16,10.2.0.0/16, 192.168.16.0/24, 192.168.17.0/24| Matches all the specified routes and all prefixes underneath. (Example 10.2.1.0/24 is underneath 10.2.0.0/16)  
Community| equals| 65001:100,65001:200| Community property of the route must have both the communities. Order isn't relevant.  
Community| contains| 65001:100,65001:200| Community property of the route can have one or more of the specified communities.  
AS-Path| equals| 65001,65002,65003| AS-PATH of the routes must have ASNs listed in the specified order.  
AS-Path| contains| 65001,65002,65003| AS-PATH in the routes can contain one or more of the ASNs listed. Order isn't relevant.  
  
#### **2\. Actions to be performed**

![](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/bS00NDAyNDkyLTk1bmlBbg?image-dimensions=750x750&revision=12)

Route-Maps allows you to Drop or Modify routes. Below are the supported actions.

Property| Action| Value| Interpretation  
---|---|---|---  
Route-prefix| Drop| 10.3.0.0/8,10.4.0.0/8| The routes specified in the rule are dropped.  
Route-prefix| Replace| 10.0.0.0/8,192.168.0.0/16| Replace all the matched routes with the routes specified in the rule.  
As-Path| Add| 64580,64581| Prepend AS-PATH with the list of ASNs specified in the rule. These ASNs are applied in the same order for the matched routes.  
As-Path| Replace| 65004,65005| AS-PATH will be set to this list in the same order, for every matched route. See key considerations for reserved AS numbers.  
As-Path| Replace| No value specified| Remove all ASNs in the AS-PATH in the matched routes.  
Community| Add| 64580:300,64581:300| Add all the listed communities to all the matched routes community attribute.  
Community| Replace| 64580:300,64581:300| Replace community attribute for all the matched routes with the list provided.  
Community| Replace| No value specified| Remove community attribute from all the matched routes.  
Community| Remove| 65001:100,65001:200|  Remove any of the listed communities that are present in the matched routes’ Community attribute.  
  
#### **3\. Apply to a Connection**

![](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/bS00NDAyNDkyLWs2V3k2Vw?image-dimensions=750x750&revision=12)

You can apply route-maps on each connection for the inbound, outbound, or both inbound and outbound directions.

![](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/bS00NDAyNDkyLXhNd3k4cQ?image-dimensions=750x750&revision=12)

## Where can I find Route-maps?

Route-Maps can be found in the routing section of your virtual WAN hub.

![](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/bS00NDAyNDkyLUt4ajJBcQ?image-dimensions=295x540&revision=12)

## 

## 

## How do I troubleshoot Route-maps?

The Route-Map Dashboard lets you views the routes for a connection. You can view the routes before or after a Route-Map is applied. 

![](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/bS00NDAyNDkyLVZvTjJSNg?image-dimensions=750x750&revision=12)

## Demo

Updated Apr 15, 2025

Version 1.0